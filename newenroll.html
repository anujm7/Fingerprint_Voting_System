<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>New Voter Enrollment | Online Voting System</title>
<style>
  :root{
    --navy:#101a3a;      /* deep header/nav color */
    --navy-2:#182447;    /* secondary navy */
    --red:#e23b3b;       /* accent red */
    --grey:#6b7280;
    --light:#f8fafc;
    --card:#ffffff;
    --shadow:0 10px 24px rgba(0,0,0,.15);
  }
  *{margin:0;padding:0;box-sizing:border-box}
  body{
    font-family: "Segoe UI", Tahoma, sans-serif;
    color:#111827;background:var(--light);line-height:1.55;
  }

  /* Topbar */
  .topbar{
    background:var(--navy);
    color:#e5e7eb;
    display:flex;justify-content:space-between;align-items:center;
    padding:8px 28px;font-size:14px
  }
  .topbar span{margin-right:18px}

  /* Header */
  .header{
    background:#fff;border-bottom:1px solid #e5e7eb;
    display:flex;align-items:center;justify-content:space-between;
    padding:14px 28px
  }
  .brand{display:flex;align-items:center;gap:14px}
  .brand .logo{font-size:32px;color:var(--navy)}
  .brand .title{font-size:22px;font-weight:800;color:var(--navy)}
  .brand .sub{font-size:12px;color:var(--grey)}
  .cta{
    display:flex;gap:10px;align-items:center
  }
  .btn{
    border:none;border-radius:28px;padding:10px 18px;font-weight:700;
    cursor:pointer;transition:transform .15s ease, filter .2s ease
  }
  .btn:active{transform:scale(.98)}
  .btn-red{background:var(--red);color:#fff}
  .btn-red:hover{filter:brightness(.94)}
  .btn-ghost{background:#eef2ff;color:var(--navy);border-radius:10px}

  /* MODULES NAV (highlighted, bordered) */
  .modules{
    position:sticky;top:0;z-index:4000;
    background:linear-gradient(0deg, var(--navy-2), var(--navy));
    border-top:4px solid var(--red);
    border-bottom:4px solid var(--red);
    box-shadow:var(--shadow)
  }
  .modules ul{list-style:none;display:flex;justify-content:center;flex-wrap:wrap}
  .modules > ul > li{position:relative;margin:0 2px}
  .modules a{
    color:#fff;text-decoration:none;font-weight:600;letter-spacing:.2px;
    display:block;padding:14px 18px;border-radius:8px;transition:background .25s ease
  }
  .modules > ul > li > a:hover{background:rgba(255,255,255,.08)}

  /* Page Title */
  .page-header {
    background: linear-gradient(135deg, var(--navy), var(--navy-2));
    color: white;
    padding: 40px 28px;
    text-align: center;
    position: relative;
  }
  
  .page-header h1 {
    font-size: 32px;
    margin-bottom: 10px;
  }
  
  .page-header p {
    font-size: 18px;
    opacity: 0.9;
    max-width: 800px;
    margin: 0 auto;
  }
  
  /* Back Button */
  .back-button {
    position: absolute;
    top: 20px;
    left: 28px;
    background: rgba(255, 255, 255, 0.2);
    color: white;
    border: none;
    border-radius: 30px;
    padding: 8px 18px;
    display: flex;
    align-items: center;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.3s;
  }
  
  .back-button:hover {
    background: rgba(255, 255, 255, 0.3);
  }
  
  .back-button span {
    margin-left: 5px;
  }

  /* Main Content */
  .enrollment-container {
    max-width: 1000px;
    margin: 40px auto;
    padding: 0 20px;
    display: flex;
    flex-wrap: wrap;
    gap: 30px;
  }
  
  /* Sidebar */
  .enrollment-sidebar {
    flex: 1;
    min-width: 280px;
  }
  
  .info-card {
    background: white;
    border-radius: 12px;
    box-shadow: var(--shadow);
    overflow: hidden;
    margin-bottom: 20px;
  }
  
  .info-card-header {
    background: linear-gradient(to right, var(--navy-2), var(--navy));
    color: white;
    padding: 15px 20px;
    font-weight: 700;
    font-size: 18px;
  }
  
  .info-card-content {
    padding: 20px;
  }
  
  .requirement-list {
    list-style: none;
    margin-bottom: 15px;
  }
  
  .requirement-item {
    display: flex;
    align-items: flex-start;
    margin-bottom: 12px;
    font-size: 14px;
  }
  
  .requirement-icon {
    background: #f3f4f6;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 12px;
    flex-shrink: 0;
    color: var(--navy);
    font-size: 12px;
  }
  
  .contact-box {
    display: flex;
    align-items: center;
    margin-top: 10px;
  }
  
  .contact-icon {
    width: 40px;
    height: 40px;
    background: #f3f4f6;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 12px;
    color: var(--navy);
  }
  
  .contact-info {
    font-size: 14px;
  }
  
  .contact-label {
    font-weight: 600;
    color: var(--navy);
  }
  
  /* Form Section */
  .enrollment-form-section {
    flex: 2;
    min-width: 500px;
  }
  
  .enrollment-form {
    background: white;
    border-radius: 12px;
    box-shadow: var(--shadow);
    padding: 30px;
    margin-bottom: 20px;
  }
  
  .form-title {
    font-size: 24px;
    color: var(--navy);
    margin-bottom: 20px;
    padding-bottom: 10px;
    border-bottom: 2px solid #e5e7eb;
  }
  
  .form-group {
    margin-bottom: 20px;
  }
  
  .form-label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: #374151;
  }
  
  .form-hint {
    display: block;
    font-size: 12px;
    color: var(--grey);
    margin-top: 4px;
  }
  
  .form-control {
    width: 100%;
    padding: 12px;
    border: 1px solid #d1d5db;
    border-radius: 6px;
    font-family: inherit;
    font-size: 16px;
    transition: border-color 0.2s, box-shadow 0.2s;
  }
  
  .form-control:focus {
    outline: none;
    border-color: #93c5fd;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
  }
  
  .form-row {
    display: flex;
    gap: 15px;
    margin-bottom: 20px;
  }
  
  .form-col {
    flex: 1;
  }
  
  .checkbox-group {
    display: flex;
    align-items: flex-start;
    margin-bottom: 12px;
  }
  
  .checkbox-input {
    margin-top: 3px;
    margin-right: 8px;
  }
  
  .checkbox-label {
    font-size: 14px;
    color: #4b5563;
  }
  
  .radio-group {
    display: flex;
    gap: 20px;
    margin-bottom: 15px;
  }
  
  .radio-item {
    display: flex;
    align-items: center;
  }
  
  .radio-input {
    margin-right: 6px;
  }
  
  .radio-label {
    font-size: 14px;
  }
  
  .file-upload {
    display: block;
    margin-bottom: 15px;
  }
  
  .file-upload-label {
    display: block;
    background: #f3f4f6;
    border: 1px dashed #d1d5db;
    padding: 20px;
    text-align: center;
    border-radius: 6px;
    cursor: pointer;
    transition: background 0.2s;
  }
  
  .file-upload-label:hover {
    background: #e5e7eb;
  }
  
  .file-upload-icon {
    font-size: 24px;
    margin-bottom: 8px;
    color: var(--grey);
  }
  
  .file-upload-text {
    font-size: 14px;
    color: #4b5563;
  }
  
  .file-upload-input {
    display: none;
  }
  
  .form-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 30px;
    padding-top: 20px;
    border-top: 1px solid #e5e7eb;
  }
  
  .privacy-text {
    font-size: 12px;
    color: var(--grey);
    max-width: 350px;
  }
  
  /* Success Message */
  .success-message {
    background: #f0fdf4;
    border: 1px solid #bbf7d0;
    color: #166534;
    padding: 20px;
    border-radius: 8px;
    text-align: center;
    margin-top: 20px;
    display: none;
  }
  
  .success-icon {
    font-size: 48px;
    margin-bottom: 15px;
  }
  
  .success-title {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 10px;
  }
  
  /* Responsive Styles */
  @media (max-width: 768px) {
    .topbar {
      flex-direction: column;
      padding: 10px;
      text-align: center;
    }
    
    .header {
      flex-direction: column;
      padding: 15px;
      gap: 15px;
    }
    
    .modules ul {
      flex-direction: column;
      align-items: center;
    }
    
    .back-button {
      position: relative;
      top: auto;
      left: auto;
      margin-bottom: 20px;
      display: inline-flex;
    }
    
    .page-header {
      text-align: center;
      padding: 30px 20px;
    }
    
    .page-header h1 {
      font-size: 28px;
    }
    
    .enrollment-container {
      flex-direction: column;
    }
    
    .enrollment-sidebar,
    .enrollment-form-section {
      min-width: 100%;
    }
    
    .form-row {
      flex-direction: column;
      gap: 0;
    }
    
    .form-footer {
      flex-direction: column;
      gap: 20px;
      text-align: center;
    }
    
    .privacy-text {
      margin-bottom: 15px;
      max-width: 100%;
    }
  }
</style>
</head>
<body>

  <!-- Topbar -->
  <div class="topbar">
    <div>
      <span>üìß contact@onlinevote.gov</span>
      <span>üìû 1800 VOTE NOW</span>
      <span>üåê Private Voting System</span>
    </div>
    <div>‚è∞ Last Updated: Sep 6, 2025 ¬∑ 09:30 AM</div>
  </div>

  <!-- Header -->
  <header class="header">
    <div class="brand">
      <div class="logo">üó≥Ô∏è</div>
      <div>
        <div class="title">Online Voting System</div>
        <div class="sub">Private Election Voting System</div>
      </div>
    </div>
    <div class="cta">
      <button class="btn btn-ghost">‚öôÔ∏è Settings</button>
    </div>
  </header>

  <!-- MODULES NAV -->
  <nav class="modules">
    <ul>
      <li><a href="main.html">Home</a></li>
      <li><a href="#">Dashboard</a></li>
      <li><a href="#">Candidates</a></li>
      <li><a href="#">Polling Stations</a></li>
      <li><a href="#">Results</a></li>
      <li><a href="#">Voter Enrollment</a></li>
      <li><a href="#">Help Desk</a></li>
    </ul>
  </nav>

  <!-- Page Header -->
  <div class="page-header">
    <button class="back-button" onclick="history.back()">‚Üê <span>Back</span></button>
    <h1>New Voter Enrollment</h1>
    <p>Register as a voter to participate in upcoming elections</p>
  </div>

  <!-- Main Content -->
  <div class="enrollment-container">
    <!-- Sidebar with Information -->
    <div class="enrollment-sidebar">
      <!-- Requirements Card -->
      <div class="info-card">
        <div class="info-card-header">
          Eligibility Requirements
        </div>
        <div class="info-card-content">
          <p>To register as a voter, you must:</p>
          <ul class="requirement-list">
            <li class="requirement-item">
              <div class="requirement-icon">‚úì</div>
              <div>Be a citizen of the country</div>
            </li>
            <li class="requirement-item">
              <div class="requirement-icon">‚úì</div>
              <div>Be at least 18 years of age on or before election day</div>
            </li>
            <li class="requirement-item">
              <div class="requirement-icon">‚úì</div>
              <div>Be a resident of the jurisdiction where you intend to vote</div>
            </li>
            <li class="requirement-item">
              <div class="requirement-icon">‚úì</div>
              <div>Not be serving a sentence for a felony conviction</div>
            </li>
            <li class="requirement-item">
              <div class="requirement-icon">‚úì</div>
              <div>Not be declared mentally incompetent by a court</div>
            </li>
          </ul>
          <p style="font-size: 14px; color: #4b5563;">All fields marked with an asterisk (*) are required.</p>
        </div>
      </div>
      
      <!-- Help Card -->
      <div class="info-card">
        <div class="info-card-header">
          Need Assistance?
        </div>
        <div class="info-card-content">
          <p style="margin-bottom: 15px;">If you have questions or need help with your voter registration:</p>
          
          <div class="contact-box">
            <div class="contact-icon">üìû</div>
            <div class="contact-info">
              <div class="contact-label">Voter Helpline</div>
              <div>1800-VOTE-NOW (1800-8683-669)</div>
            </div>
          </div>
          
          <div class="contact-box">
            <div class="contact-icon">üìß</div>
            <div class="contact-info">
              <div class="contact-label">Email Support</div>
              <div>voter-support@onlinevote.gov</div>
            </div>
          </div>
          
          <div class="contact-box">
            <div class="contact-icon">üí¨</div>
            <div class="contact-info">
              <div class="contact-label">Live Chat</div>
              <div>Available Mon-Fri, 8AM-8PM</div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Registration Form Section -->
    <div class="enrollment-form-section">
      <!-- Registration Form -->
      <form id="enrollmentForm" class="enrollment-form">
        <h2 class="form-title">Voter Registration Form</h2>
        
        <div class="form-row">
          <div class="form-col">
            <div class="form-group">
              <label for="firstName" class="form-label">First Name *</label>
              <input type="text" id="firstName" class="form-control" required>
            </div>
          </div>
          <div class="form-col">
            <div class="form-group">
              <label for="lastName" class="form-label">Last Name *</label>
              <input type="text" id="lastName" class="form-control" required>
            </div>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-col">
            <div class="form-group">
              <label for="dob" class="form-label">Date of Birth *</label>
              <input type="date" id="dob" class="form-control" required>
            </div>
          </div>
          <div class="form-col">
            <div class="form-group">
              <label for="age" class="form-label">Age *</label>
              <input type="number" id="age" class="form-control" min="18" max="120" required>
              <span class="form-hint">Must be at least 18 years old</span>
            </div>
          </div>
        </div>
        
        <div class="form-group">
          <label class="form-label">Gender *</label>
          <div class="radio-group">
            <div class="radio-item">
              <input type="radio" id="genderMale" name="gender" class="radio-input" required>
              <label for="genderMale" class="radio-label">Male</label>
            </div>
            <div class="radio-item">
              <input type="radio" id="genderFemale" name="gender" class="radio-input">
              <label for="genderFemale" class="radio-label">Female</label>
            </div>
            <div class="radio-item">
              <input type="radio" id="genderOther" name="gender" class="radio-input">
              <label for="genderOther" class="radio-label">Other</label>
            </div>
          </div>
        </div>
        
        <div class="form-group">
          <label for="address" class="form-label">Residential Address *</label>
          <input type="text" id="address" placeholder="Street Address" class="form-control" required>
        </div>
        
        <div class="form-row">
          <div class="form-col">
            <div class="form-group">
              <label for="city" class="form-label">City *</label>
              <input type="text" id="city" class="form-control" required>
            </div>
          </div>
          <div class="form-col">
            <div class="form-group">
              <label for="state" class="form-label">State *</label>
              <select id="state" class="form-control" required>
                <option value="">Select State</option>
                <option value="AL">Alabama</option>
                <option value="AK">Alaska</option>
                <option value="AZ">Arizona</option>
                <option value="AR">Arkansas</option>
                <option value="CA">California</option>
                <option value="CO">Colorado</option>
                <option value="CT">Connecticut</option>
                <!-- More states would be listed here -->
              </select>
            </div>
          </div>
          <div class="form-col">
            <div class="form-group">
              <label for="zip" class="form-label">ZIP Code *</label>
              <input type="text" id="zip" class="form-control" required>
            </div>
          </div>
        </div>
        
        <div class="form-group">
          <label for="organization" class="form-label">Organization Name</label>
          <input type="text" id="organization" class="form-control">
          <span class="form-hint">Company, school or organization you're affiliated with (optional)</span>
        </div>
        
        <div class="form-group">
          <label for="idProof" class="form-label">ID Proof *</label>
          <select id="idProof" class="form-control" required>
            <option value="">Select ID Type</option>
            <option value="driver">Driver's License</option>
            <option value="state">State ID Card</option>
            <option value="passport">Passport</option>
            <option value="military">Military ID</option>
            <option value="other">Other Government-issued ID</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="idNumber" class="form-label">ID Number *</label>
          <input type="text" id="idNumber" class="form-control" required>
          <span class="form-hint">Enter the number shown on your ID document</span>
        </div>
        
        <div class="form-group">
          <label for="idUpload" class="form-label">Upload ID Document (Front) *</label>
          <div class="file-upload">
            <label for="idUpload" class="file-upload-label">
              <div class="file-upload-icon">üìÑ</div>
              <div class="file-upload-text">Click to upload or drag and drop</div>
              <div style="font-size: 12px; color: var(--grey);">JPG, PNG or PDF (max 5MB)</div>
            </label>
            <input type="file" id="idUpload" class="file-upload-input" accept=".jpg,.jpeg,.png,.pdf" required>
          </div>
        </div>
        
        <div class="form-group">
          <div class="checkbox-group">
            <input type="checkbox" id="certify" class="checkbox-input" required>
            <label for="certify" class="checkbox-label">
              I certify that all information provided is true and correct to the best of my knowledge. I understand that providing false information is punishable by law. *
            </label>
          </div>
        </div>
        
        <div class="form-group">
          <div class="checkbox-group">
            <input type="checkbox" id="privacy" class="checkbox-input" required>
            <label for="privacy" class="checkbox-label">
              I agree to the <a href="#">Privacy Policy</a> and consent to the processing of my personal data for voter registration purposes. *
            </label>
          </div>
        </div>
        
        <div class="form-footer">
          <div class="privacy-text">
            Your personal information is protected and will only be used for voter registration purposes.
          </div>
          <button type="submit" id="submitBtn" class="btn btn-red">Submit Registration</button>
        </div>
      </form>
      
      <!-- Success Message (Hidden by Default) -->
      <div id="successMessage" class="success-message">
        <div class="success-icon">‚úÖ</div>
        <h2 class="success-title">Registration Successful!</h2>
        <p>Your voter registration has been submitted successfully!</p>
        <div style="background: #f0f9ff; padding: 15px; border-radius: 8px; margin: 15px 0; border-left: 4px solid #0284c7;">
          <p style="margin: 0; font-weight: 600; color: #0284c7;">üó≥Ô∏è Your Voter ID: <span id="generated-voter-id" style="font-family: monospace; background: #e0f2fe; padding: 2px 6px; border-radius: 4px;"></span></p>
        </div>
        <p>You will be automatically redirected to your voter dashboard in <span id="countdown">3</span> seconds...</p>
        <div style="display: flex; gap: 10px; margin-top: 20px;">
          <button class="btn btn-red" onclick="goToDashboard()">Go to Dashboard Now</button>
          <button class="btn btn-secondary" onclick="window.location.href='main.html'">Return to Home</button>
        </div>
      </div>
    </div>
  </div>

  <script type="module">
    // Import the functions you need from the Firebase v9 SDK
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    import { getDatabase, ref, push, set } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";
    import { getStorage, ref as storageRef, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-storage.js";

    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyBUq8kXNMY29rfqEf0APbnyDMf-fWTc7SU",
      authDomain: "fingerprint-voting-syste-d926c.firebaseapp.com",
      databaseURL: "https://fingerprint-voting-syste-d926c-default-rtdb.firebaseio.com",
      projectId: "fingerprint-voting-syste-d926c",
      storageBucket: "fingerprint-voting-syste-d926c.firebasestorage.app",
      messagingSenderId: "458706704567",
      appId: "1:458706704567:web:e1595ac2701de926219532",
      measurementId: "G-4SEHLRDTCY"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);

    // Initialize Realtime Database and Storage
    const database = getDatabase(app);
    const storage = getStorage(app);

    // Make Firebase available globally for other functions
    window.database = database;
    window.storage = storage;
    window.firebaseRefs = { ref, push, set, storageRef, uploadBytes, getDownloadURL };
  </script>

  <script>
    // Calculate age automatically when date of birth changes
    document.getElementById('dob').addEventListener('change', function() {
      const dob = new Date(this.value);
      const today = new Date();
      let age = today.getFullYear() - dob.getFullYear();
      const monthDiff = today.getMonth() - dob.getMonth();
      
      if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < dob.getDate())) {
        age--;
      }
      
      document.getElementById('age').value = age;
    });
    
    // Update date of birth if age is changed manually
    document.getElementById('age').addEventListener('change', function() {
      const age = parseInt(this.value);
      const today = new Date();
      const yearOfBirth = today.getFullYear() - age;
      
      // Set to January 1st of the calculated year (approximate)
      const dobField = document.getElementById('dob');
      if (!dobField.value) {
        const dob = new Date(yearOfBirth, 0, 1);
        const month = (dob.getMonth() + 1).toString().padStart(2, '0');
        const day = dob.getDate().toString().padStart(2, '0');
        dobField.value = `${dob.getFullYear()}-${month}-${day}`;
      }
    });
    
    // Display file name when a file is selected
    document.getElementById('idUpload').addEventListener('change', function() {
      const fileName = this.files[0]?.name;
      if (fileName) {
        const uploadLabel = this.previousElementSibling;
        const textElement = uploadLabel.querySelector('.file-upload-text');
        textElement.textContent = fileName;
      }
    });
    
    // Form submission handling
    document.getElementById('enrollmentForm').addEventListener('submit', async function(e) {
      e.preventDefault();
      
      // Show loading state
      const submitBtn = document.getElementById('submitBtn');
      const originalBtnText = submitBtn.textContent;
      submitBtn.textContent = 'Submitting...';
      submitBtn.disabled = true;
      
      try {
        // Get form data
        const firstName = document.getElementById('firstName').value;
        const lastName = document.getElementById('lastName').value;
        const dob = document.getElementById('dob').value;
        const age = document.getElementById('age').value;
        
        // Get gender value
        let gender;
        document.querySelectorAll('input[name="gender"]').forEach(radio => {
          if (radio.checked) {
            gender = radio.id === 'genderMale' ? 'Male' : (radio.id === 'genderFemale' ? 'Female' : 'Other');
          }
        });
        
        const address = document.getElementById('address').value;
        const city = document.getElementById('city').value;
        const state = document.getElementById('state').value;
        const zip = document.getElementById('zip').value;
        const organization = document.getElementById('organization').value;
        const idProofType = document.getElementById('idProof').value;
        const idNumber = document.getElementById('idNumber').value;
        
        // Create voter data object
        const voterData = {
          firstName,
          lastName,
          dob,
          age: parseInt(age),
          gender,
          address,
          city,
          state,
          zip,
          organization,
          idProofType,
          idNumber,
          registrationDate: new Date(),
          status: 'Pending' // Initial status
        };
        
        // Upload ID document if provided
        const idDocument = document.getElementById('idUpload').files[0];
        if (idDocument) {
          // Create a reference to the file in Firebase Storage
          const fileStorageRef = window.firebaseRefs.storageRef(window.storage, `voter_id_documents/${firstName}_${lastName}_${Date.now()}`);
          
          // Upload the file
          await window.firebaseRefs.uploadBytes(fileStorageRef, idDocument);
          
          // Get the download URL
          const downloadURL = await window.firebaseRefs.getDownloadURL(fileStorageRef);
          
          // Add download URL to voter data
          voterData.idDocumentURL = downloadURL;
        }
        
        // Add voter data to Realtime Database
        const votersRef = window.firebaseRefs.ref(window.database, 'voters');
        const newVoterRef = window.firebaseRefs.push(votersRef);
        await window.firebaseRefs.set(newVoterRef, voterData);
        
        // Show success message
        this.style.display = 'none';
        document.getElementById('successMessage').style.display = 'block';
        
        // Store voter ID for dashboard access
        localStorage.setItem('currentVoterId', voterData.voterId);
        
        // Display generated voter ID
        document.getElementById('generated-voter-id').textContent = voterData.voterId;
        
        // Start countdown
        startCountdown();
        
        // Scroll to success message
        document.getElementById('successMessage').scrollIntoView({ behavior: 'smooth' });
        
        // Auto-redirect to dashboard after 3 seconds
        setTimeout(() => {
          window.location.href = `voter-dashboard.html?voterId=${voterData.voterId}`;
        }, 3000);
        
      } catch (error) {
        console.error('Error submitting form:', error);
        alert('There was an error submitting your registration. Please try again later.');
        
        // Reset button
        submitBtn.textContent = originalBtnText;
        submitBtn.disabled = false;
      }
    });

    // Countdown function
    function startCountdown() {
      let seconds = 3;
      const countdownElement = document.getElementById('countdown');
      
      const countdownInterval = setInterval(() => {
        seconds--;
        countdownElement.textContent = seconds;
        
        if (seconds <= 0) {
          clearInterval(countdownInterval);
          countdownElement.textContent = '0';
        }
      }, 1000);
    }

    // Go to dashboard immediately
    function goToDashboard() {
      const voterId = localStorage.getItem('currentVoterId');
      if (voterId) {
        window.location.href = `voter-dashboard.html?voterId=${voterId}`;
      } else {
        alert('Error: Voter ID not found. Please try logging in.');
        window.location.href = 'login.html';
      }
    }

    // Make functions available globally
    window.startCountdown = startCountdown;
    window.goToDashboard = goToDashboard;
  </script>

</body>
</html>
